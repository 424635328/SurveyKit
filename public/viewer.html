<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>问卷答案预览器 - SurveyKit</title>
    <link rel="icon" href="./favicon.ico" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- Tailwind CSS (假设 viewer.css 没有完全覆盖tailwind) -->
    <script src="https://cdn.tailwindcss.com"></script> 
    <link rel="stylesheet" href="viewer.css">
    <script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>
</head>
<body class="bg-gray-50">

    <div class="viewer-container">
        <header class="page-header">
            <a href="./hub/hub.html" class="back-link"><i class="fa fa-arrow-left"></i> 返回工具中心</a>
            <h1 class="main-title animated-line">问卷答案预览器</h1>
        </header>

        <main id="view-container">
            <div id="id-input-view" class="view-section">
                <p class="prompt-text animated-line">请输入或粘贴完整的问卷链接（包含ID和密钥），或仅输入ID来尝试访问公开问卷（如果存在）。</p>
                <form id="id-input-form" class="input-form animated-line">
                    <input type="text" id="survey-id-input" placeholder="例如: https://your.app/viewer.html?id=xxx&token=yyy 或 问卷ID" required>
                    <button type="submit" id="submit-id-btn"><i class="fa fa-search"></i> 查看结果</button>
                </form>
                <p class="mt-4 text-center text-sm text-gray-600">
                    忘记专属链接？<a href="/recover.html" class="text-blue-600 hover:underline">点此找回</a>
                </p>
            </div>

            <div id="results-view" class="view-section hidden">
                <div class="export-actions animated-line">
                    <p id="current-id-display">正在查看 ID: <span></span></p>
                    
                    <div class="action-buttons-group">
                        <button id="search-new-btn" class="action-button search-new-button">
                            <i class="fa fa-search"></i> 查询其他ID
                        </button>
                        <div id="export-container" class="export-container">
                            <button id="exportBtn" class="action-button export-button">
                                <i class="fa fa-download"></i> 导出 <i class="fa fa-caret-down"></i>
                            </button>
                            <div id="export-menu" class="export-menu">
                                <a href="#" data-format="json"><i class="fa fa-file-code-o"></i><span>JSON</span></a>
                                <a href="#" data-format="excel"><i class="fa fa-file-excel-o"></i><span>Excel</span></a>
                                <a href="#" data-format="csv"><i class="fa fa-file-text-o"></i><span>CSV</span></a>
                                <a href="#" data-format="txt"><i class="fa fa-file-text"></i><span>TXT</span></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="results-container" class="results-grid">
                    <p class="loading-placeholder">正在加载数据...</p>
                </div>
            </div>
        </main>
        
        <footer class="page-footer">
            <p>由 <a href="https://github.com/424635328/SurveyKit" target="_blank" rel="noopener">SurveyKit</a> 强力驱动</p>
        </footer>
    </div>
    
    <div id="notification" class="notification-toast">
        <i id="notification-icon" class="fa fa-info-circle"></i>
        <span id="notification-text">操作成功</span>
    </div>

    <!-- 新增：滚动到顶部按钮 -->
    <button id="scrollToTopBtn"
      class="fixed bottom-6 right-6 bg-indigo-600 text-white p-3 rounded-full shadow-lg opacity-0 pointer-events-none transition-all duration-300 transform translate-y-4 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 z-50"
      aria-label="Scroll to top">
      <i class="fa fa-arrow-up text-lg"></i>
    </button>

    <!-- 新增：滚动到底部按钮 -->
    <button id="scrollToBottomBtn"
      class="fixed bottom-6 right-20 bg-emerald-600 text-white p-3 rounded-full shadow-lg opacity-0 pointer-events-none transition-all duration-300 transform translate-y-4 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 z-50"
      aria-label="Scroll to bottom">
      <i class="fa fa-arrow-down text-lg"></i>
    </button>

    <script src="viewer.js"></script>
</body>
</html>