<!DOCTYPE html>
<html lang="zh-CN">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>提交结果 - SurveyKit</title>
        <link rel="stylesheet" href="result.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link
            href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap"
            rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    </head>

    <body>
        <div class="result-container">
            <div id="status-container" class="section-card status-container">
                <p class="loading">正在处理你的提交...</p>
            </div>

            <div id="personality-card" class="section-card personality-card"
                style="display: none;">
                <div class="card-header">
                    <span class="card-icon">🎭</span>
                    <h3>你的专属人格画像</h3>
                </div>
                <p id="personality-tag" class="personality-tag"></p>
                <p id="personality-desc" class="personality-desc"></p>
                <p id="secondary-personality" class="secondary-personality"
                    style="display: none;"></p>
            </div>

            <div id="egg-container" class="section-card egg-container"
                style="display: none;">
                <div class="card-header">
                    <span class="card-icon">💡</span>
                    <h3>来自问卷的彩蛋</h3>
                </div>
                <p id="egg-text" class="egg-text"></p>
                <button id="reroll-egg-btn" class="reroll-btn" title="换一个看看">🎲
                    换一个</button>
            </div>

            <div id="actions-container" class="actions-container"
                style="display: none;">
                <div class="action-card section-card">
                    <h3>你的问卷档案</h3>
                    <p>回顾你刚刚填写的所有答案，或进行人格分析。</p>
                    
                    <!-- 专属问卷链接区域 - 保持并使其成为主要入口 -->
                    <div class="my-link-section mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg text-blue-800 text-sm">
                        <p class="font-bold mb-2">✨ 你的专属问卷链接已生成！</p>
                        <p class="mb-3">请务必保存此链接，下次查看或分享你的问卷结果，需要凭此链接。</p>
                        <div class="flex items-center space-x-2">
                            <span id="exclusive-survey-link" class="bg-blue-100 text-blue-900 p-2 rounded-md break-all flex-grow text-xs sm:text-sm">
                                <!-- 链接将由 JS 填充 -->
                            </span>
                            <button id="copy-exclusive-link-btn" class="bg-blue-600 text-white p-2 rounded-md hover:bg-blue-700 transition-colors" aria-label="复制专属链接">
                                <i class="fa fa-copy"></i>
                            </button>
                        </div>
                        <p class="mt-3 text-xs text-gray-600">此链接包含密钥，请勿随意分享给他人，除非您希望对方直接访问。</p>
                    </div>

                    <button id="viewMySubmissionBtn"
                        class="primary-action-btn mt-4">查看我的完整提交 ↗</button>
                    <button id="goToMbtiAnalysisBtn"
                        class="primary-action-btn mbti-btn">深入分析我的MBTI
                        🤖</button>
                </div>
                <div class="action-card section-card">
                    <h3>默契度大挑战</h3>
                    <!-- 文本更新：提示用户输入链接 -->
                    <p>输入TA的问卷专属链接，或一键生成你的对比链接发给TA！</p>
                    
                    <div class="compare-form">
                        <!-- ID更新为 compareLinkInput，placeholder更新为链接示例 -->
                        <input type="text" id="compareLinkInput"
                            placeholder="在此粘贴对方的问卷专属链接 (例如：https://你的域名/viewer.html?id=xxx&token=yyy)" autocomplete="off">
                        <button id="startCompareBtn"
                            class="primary-action-btn">开始对比</button>
                    </div>
                    <button id="generateCompareLinkBtn"
                        class="secondary-action-btn">🔗 生成我的对比链接</button>
                </div>
            </div>

            <div class="back-action">
                <a href="/" class="secondary-action-link">‹ 返回首页再填一份</a>
            </div>
        </div>

        <script src="result.js"></script>
    </body>

</html>