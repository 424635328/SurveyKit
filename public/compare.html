<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>默契度对比 - SurveyKit</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- 引入通用样式和本页特有样式 -->
    <link rel="stylesheet" href="viewer.css"> 
    <link rel="stylesheet" href="compare.css">
</head>

<body>
    <div class="compare-container">
        <h1 class="page-title">默契度大挑战 🧐</h1>
        <p class="page-subtitle">输入双方问卷链接，揭示你们的默契与不同！</p>

        <!-- 双链接输入界面 -->
        <div id="double-link-prompt" class="section-card compare-prompt">
            <div class="card-header">
                <span class="card-icon">🤝</span>
                <h3>输入双方问卷链接</h3>
            </div>
            <p>请输入两个完整的问卷专属链接进行对比，看看你们的默契度如何！</p>
            <div class="double-compare-form">
                <div class="input-group">
                    <label for="firstLinkInput" class="sr-only">第一个问卷链接</label>
                    <input type="text" id="firstLinkInput" 
                           placeholder="在此粘贴第一个问卷专属链接 (例如：https://你的域名/viewer.html?id=xxx&token=yyy)" 
                           autocomplete="off" class="form-input">
                </div>
                <div class="input-group">
                    <label for="secondLinkInput" class="sr-only">第二个问卷链接</label>
                    <input type="text" id="secondLinkInput" 
                           placeholder="在此粘贴第二个问卷专属链接 (例如：https://你的域名/viewer.html?id=aaa&token=bbb)" 
                           autocomplete="off" class="form-input">
                </div>
                <button id="compareTwoLinksBtn" class="primary-action-btn">开始对比</button>
            </div>
            <p class="small-text">还没有问卷？<a href="/" class="link-text">点击这里</a>去填写一份吧！</p>
        </div>

        <!-- 单链接输入界面 -->
        <div id="single-link-prompt" class="section-card compare-prompt">
            <div class="card-header">
                <span class="card-icon">🤝</span>
                <h3>加入这场默契挑战！</h3>
            </div>
            <p>你的朋友向你发起了挑战。请在下方粘贴你自己的问卷专属链接，来看看你们的匹配度吧！</p>
            <div class="compare-form">
                <input type="text" id="receiverLinkInput" 
                       placeholder="在此粘贴你自己的问卷专属链接 (例如：https://你的域名/viewer.html?id=xxx&token=yyy)" 
                       autocomplete="off" class="form-input">
                <button id="finalizeCompareBtn" class="primary-action-btn">揭晓结果</button>
            </div>
            <p class="small-text">还没有自己的问卷？<a href="/" class="link-text">点击这里</a>去填写一份吧！</p>
        </div>

        <!-- 加载动画区域 -->
        <div id="loading-compare-spinner" class="loading-spinner">
            <div class="spinner"></div>
            <p id="loading-compare-text">正在计算默契度，请稍候...</p>
        </div>

        <!-- 状态/错误信息区域 -->
        <div id="status-message" class="message-text"></div>

        <!-- 默契度得分仪表盘 -->
        <div id="match-score-container" class="section-card match-score-container">
            <div class="card-header">
                <span class="card-icon">🎯</span>
                <h3>默契度得分</h3>
            </div>
            <div class="score-circle">
                <span id="match-score">0</span>%
            </div>
            <p id="match-summary"></p>
        </div>

        <!-- 对比结果容器 -->
        <div id="compare-results-container" class="section-card compare-results-container">
            <div class="card-header">
                <span class="card-icon">📋</span>
                <h3>对比详情</h3>
            </div>
            <div class="results-table-header">
                <div class="question-column">问题</div>
                <div class="answer-column">答案一</div>
                <div class="answer-column">答案二</div>
            </div>
            <div id="results-list">
                <!-- 对比结果项会在这里动态加载 -->
            </div>
        </div>

        <footer class="page-footer">
            <p>返回 <a href="/" class="link-text">问卷首页</a></p>
        </footer>
    </div>

    <script src="compare.js"></script>
</body>

</html>